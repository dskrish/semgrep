rules:
  - id: json_error_uggettext
    patterns:
        - pattern: zerver.lib.response.json_error(...)
        - pattern-not: zerver.lib.response.json_error(django.utils.translation.ugettext("..."), ...)
    message: "Argument to json_error should be a literal string enclosed by _()"
    languages: [python]
    severity: ERROR
  - id: jsonableerror_uggettext
    patterns:
        - pattern: zerver.lib.exceptions.JsonableError(...)
        - pattern-not: zerver.lib.exceptions.JsonableError(django.utils.translation.ugettext("..."), ...)
    message: "Argument to JsonableError should be a literal string enclosed by _()"
    languages: [python]
    severity: ERROR
  - id: ugettext_with_computed_string
    patterns:
        - pattern: django.utils.translation.ugettext($A)
        - pattern-not: django.utils.translation.ugettext("...")
    message: "Called _() on a computed string $A"
    languages: [python]
    severity: ERROR
